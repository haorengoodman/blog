---
layout:     post
title:      "数字签名详解"
subtitle:   "digital signature"
date:       2016-02-22
author:     "GT"
header-img: "img/post-bg-alitrip.jpg"
tags:
    - 数字签名
---
<div id="top"></div>
今天详解一下加签和加密的关系。以及为什么需要数字证书管理中心(机构名)。

首先需要明确一些挂念:  
1. 对称加密和非对称加密。
	-  对称加密：文件加密和解密使用同样的秘钥(既:公钥和私钥相同)
	-  非对称加密：分两种秘钥，私钥是所有者持有，不可公布；公钥是是持有者公布给他人使用。
2. 公钥：用于给数据加密，用公钥加密的数据只能用私钥解密。
3. 私钥：用于给数据加密，用私钥加密的数据只能用公钥解密。
4. 摘要：对需要传送的文本做一个HASH计算，一般采用SHA1,SHA2来获得。
5. 签名：使用私钥(或者公钥)对需要传送的文本的摘要进行加密，得到的密文是需要传送的文本的签名。
5. 签名验证：简称验签，数据接收端得到传送文本，需要确认文本传送过程是否被篡改。因此需要使用己持有的公钥对签名进行解密(秘钥对中的一种秘钥加密数据必定能使用另一种秘钥解密。)，得到文本摘要，然后使用与发送方同样的HASH算法得到摘要值，再与解密得到的摘要值对比，若一致，则文本未被篡改。  

至此，加密、解密、加签的概念已经讲解完毕。那么为什么还需要‘数字证书管理中心’呢？  

在签名过程中，有一点很关键，收到数据的一方，需要保管好公钥，但是每一个发送方都有一个自己的公钥，那么接收方就需要保存很多的公钥(根本管理不过来)。第二点，本地保存的公钥很可能被篡改或者替换，而且无从发现。所以，针对上述的两个问题，数字证书管理中心应运而生(CA)。由CA来管理所有数据发送方的工公钥，对公钥进行认证和加密。认证加密后的公钥，即是证书，又叫CA证书。证书中包含了很多信息，对重要的就是申请者的公钥。  

CA机构在给公钥加密时，使用的是一个统一的秘钥对，在加密公钥时，用的是其中的私钥。这样，申请者拿到证书后，在发送数据时，用自己的私钥生成签名，将签名、证书和发送北荣一起发送给对方，对方拿到证书后，需要对证书解密，以获取其中的公钥，解密需要用到CA机构的“同意秘钥对”中的公钥，这个公钥就是我们常说的CA跟证书，通常需要我们到证书颁发机构去下载并安装到相应的收取数据的客户端，如浏览器。这个公钥只需安装一次。有了这个公钥之后，就可以解密证书，获取发送方的公钥，然后解密签名，获取摘要，根据明文重新计算摘要，然后对比两个摘要，以验证数据内容的完整性。  

阮一峰有一篇关于[数字签名](http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html)的文章，图文并茂，可以参考，以加深理解。  






<div id="footer"></div>

